<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="hermit blog">
  <meta name="keyword" content="hexo">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Java手册 | onechat
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/css/plugins/gitment.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
    
<script src="/js/gitment.js"></script>

  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
<meta name="generator" content="Hexo 4.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>onechat</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Java手册</h2>
  <p class="post-date">2020-10-04</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="1-反射"><a href="#1-反射" class="headerlink" title="1.反射"></a>1.反射</h1><h2 id="1-类封装与反射"><a href="#1-类封装与反射" class="headerlink" title="1.*类封装与反射"></a>1.*类封装与反射</h2><table>
<thead>
<tr>
<th>类封装</th>
<th>反射</th>
</tr>
</thead>
<tbody><tr>
<td>正常情况下，我们总是通过<code>p.name</code>来访问<code>Person</code>的<code>name</code>字段，编译器会根据<code>public</code>、<code>protected</code>和<code>private</code>决定是否允许访问字段</td>
<td>一种非常规的用法,会破坏对象的封装，使用反射，首先代码非常繁琐，其次，它更多地是给工具或者底层框架来使用，目的是在不知道目标实例任何信息的情况下，获取特定字段的值</td>
</tr>
<tr>
<td></td>
<td><code>setAccessible(true)</code>可能会失败。如果JVM运行期存在<code>SecurityManager</code>，那么它会根据规则进行检查，有可能阻止<code>setAccessible(true)</code>。例如，某个<code>SecurityManager</code>可能不允许对<code>java</code>和<code>javax</code>开头的<code>package</code>的类调用<code>setAccessible(true)</code>，这样可以保证JVM核心库的安全</td>
</tr>
</tbody></table>
<p>除byte,char,short,int ,long,float.double.boolean这些基本数据类型外，Java的其他类型全部都是<code>class</code>（包括<code>interface</code>），如String，String[],Exception等。同时JVM为每一种基本类型，如int，也创建了<code>Class</code>，通过<code>int.class</code>访问(<em>其clazz.isPrimitive()的返回结果为true</em>)</p>
<h2 id="1-1-Class"><a href="#1-1-Class" class="headerlink" title="1.1 Class"></a>1.1 Class</h2><h3 id="1-1-1-如何获取一个class的Class实例？"><a href="#1-1-1-如何获取一个class的Class实例？" class="headerlink" title="1.1.1 如何获取一个class的Class实例？"></a>1.1.1 如何获取一个class的Class实例？</h3><table>
<thead>
<tr>
<th>1.通过一个<code>class</code>的静态变量<code>class</code>获取</th>
<th>Class cls = String.class;</th>
</tr>
</thead>
<tbody><tr>
<td>2.通过该实例变量提供的<code>getClass()</code>方法获取^前提:存在一个实例变量^</td>
<td>String s = “Hello”; Class cls = s.getClass();</td>
</tr>
<tr>
<td>3.通过静态方法<code>Class.forName()</code>获取^前提:知道一个<code>class</code>的完整类名^</td>
<td>Class cls = Class.forName(“java.lang.String”);</td>
</tr>
</tbody></table>
<p>三种方式获取的<code>Class</code>实例都是同一个实例，因为JVM对每个加载的<code>Class</code>只创建一个<code>Class</code>实例来表示它的类型</p>
<h3 id="1-1-2-Class实例比较和instanceof的区别"><a href="#1-1-2-Class实例比较和instanceof的区别" class="headerlink" title="1.1.2 Class实例比较和instanceof的区别"></a>1.1.2 <code>Class</code>实例比较和<code>instanceof</code>的区别</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer n = <span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">boolean</span> b1 = n <span class="keyword">instanceof</span> Integer; <span class="comment">// true </span></span><br><span class="line"><span class="keyword">boolean</span> b2 = n <span class="keyword">instanceof</span> Number; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> b3 = n.getClass() == Integer<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> b4 = n.getClass() == Number<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th></th>
<th><code>instanceof</code></th>
<th><code>Class</code>实例比较</th>
</tr>
</thead>
<tbody><tr>
<td>区别</td>
<td>不但匹配指定类型，还匹配指定类型的子类</td>
<td>用<code>==</code>判断<code>class</code>实例可以精确地判断数据类型，但不能作子类型比较</td>
</tr>
</tbody></table>
<p>​        <strong>通常情况下，我们应该用<code>instanceof</code>判断数据类型，因为面向抽象编程的时候，我们不关心具体的子类型。只有在需要精确判断一个类型是不是某个<code>class</code>的时候，我们才使用<code>==</code>判断<code>class</code>实例</strong></p>
<h3 id="1-1-3-创建实例-newInstance"><a href="#1-1-3-创建实例-newInstance" class="headerlink" title="1.1.3 创建实例 newInstance()"></a>1.1.3 创建实例 <code>newInstance()</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过Class.newInstance()可以创建类实例，它的局限是：只能调用public的无参数构造方法。带参数的构造方法，或者非public的构造方法都无法通过Class.newInstance()被调用。</span></span><br><span class="line"><span class="comment">//获取</span></span><br><span class="line">Class cls = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"><span class="comment">//创建</span></span><br><span class="line">String s = (String) cls.newInstance();</span><br></pre></td></tr></table></figure>

<h3 id="1-1-4-动态加载"><a href="#1-1-4-动态加载" class="headerlink" title="1.1.4 动态加载"></a>1.1.4 动态加载</h3><blockquote>
<p>VM在执行Java程序的时候，并不是一次性把所有用到的class全部加载到内存，而是第一次需要用到class时才加载</p>
<p>利用JVM动态加载<code>class</code>的特性，我们才能在运行期根据条件加载不同的实现类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Commons Logging优先使用Log4j,大致实现思路</span></span><br><span class="line">LogFactory factory = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (isClassPresent(<span class="string">"org.apache.logging.log4j.Logger"</span>)) &#123;</span><br><span class="line">    factory = createLog4j();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory = createJdkLog();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isClassPresent</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Class.forName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//只需要把Log4j的jar包放到classpath中，Commons Logging就会自动使用Log4j的原因</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-访问字段"><a href="#1-2-访问字段" class="headerlink" title="1.2 访问字段"></a>1.2 访问字段</h2><h3 id="1-2-1-通过Class实例获取字段信息"><a href="#1-2-1-通过Class实例获取字段信息" class="headerlink" title="1.2.1 通过Class实例获取字段信息"></a>1.2.1 通过<code>Class</code>实例获取字段信息</h3><table>
<thead>
<tr>
<th>Field getField(name)</th>
<th>根据字段名获取某个public的field（包括父类）</th>
</tr>
</thead>
<tbody><tr>
<td>Field getDeclaredField(name)</td>
<td>根据字段名获取当前类的某个field（不包括父类）<del>private也可获取</del></td>
</tr>
<tr>
<td>Field[] getFields()</td>
<td>获取所有public的field（包括父类）</td>
</tr>
<tr>
<td>Field[] getDeclaredFields()</td>
<td>获取当前类的所有field（不包括父类）</td>
</tr>
</tbody></table>
<h3 id="1-2-2-Field对象包含了一个字段的所有信息"><a href="#1-2-2-Field对象包含了一个字段的所有信息" class="headerlink" title="1.2.2  Field对象包含了一个字段的所有信息"></a>1.2.2  <code>Field</code>对象包含了一个字段的所有信息</h3><table>
<thead>
<tr>
<th>getName()</th>
<th>返回字段名称，例如，<code>&quot;name&quot;</code></th>
</tr>
</thead>
<tbody><tr>
<td>getType()</td>
<td>返回字段类型，也是一个<code>Class</code>实例，例如，<code>String.class</code></td>
</tr>
<tr>
<td>getModifiers()</td>
<td>返回字段的修饰符<del>它是一个<code>int</code>，不同的bit表示不同的含义</del></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//String类的value字段</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取字段信息</span></span><br><span class="line">Field f = String.class.getDeclaredField("value");</span><br><span class="line">f.getName(); <span class="comment">// "value"</span></span><br><span class="line">f.getType(); <span class="comment">// class [B 表示byte[]类型</span></span><br><span class="line"><span class="keyword">int</span> m = f.getModifiers();</span><br><span class="line">Modifier.isFinal(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isPublic(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isProtected(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isPrivate(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isStatic(m); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-3-获取字段值-Field-get-Object"><a href="#1-2-3-获取字段值-Field-get-Object" class="headerlink" title="1.2.3 获取字段值 Field.get(Object)"></a>1.2.3 获取字段值 <code>Field.get(Object)</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">//对于私有字段，需要setAccessible(true)</span></span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        Object value = f.get(p);</span><br><span class="line">        System.out.println(value); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-4-设置字段值Field-set-Object-Object"><a href="#1-2-4-设置字段值Field-set-Object-Object" class="headerlink" title="1.2.4 设置字段值Field.set(Object, Object)"></a>1.2.4 设置字段值<code>Field.set(Object, Object)</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一个Object参数是指定的实例，第二个Object参数是待修改的值</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        f.set(p, <span class="string">"Xiao Hong"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Hong"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-调用方法"><a href="#1-3-调用方法" class="headerlink" title="1.3 调用方法"></a>1.3 调用方法</h2><h3 id="1-3-1-获取Method信息"><a href="#1-3-1-获取Method信息" class="headerlink" title="1.3.1 获取Method信息"></a>1.3.1 获取<code>Method</code>信息</h3><table>
<thead>
<tr>
<th>Method getMethod(name, Class…)</th>
<th>获取某个<code>public</code>的<code>Method</code>（包括父类）</th>
</tr>
</thead>
<tbody><tr>
<td>Method getDeclaredMethod(name, Class…)</td>
<td>获取当前类的某个<code>Method</code>（不包括父类）</td>
</tr>
<tr>
<td>Method[] getMethods()</td>
<td>获取所有<code>public</code>的<code>Method</code>（包括父类）</td>
</tr>
<tr>
<td>Method[] getDeclaredMethods()</td>
<td>获取当前类的所有<code>Method</code>（不包括父类）</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class stdClass = Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        <span class="comment">// 获取public方法getScore，参数为String:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getScore"</span>, String<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        <span class="comment">// 获取继承的public方法getName，无参数:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getName"</span>));</span><br><span class="line">        <span class="comment">// 获取private方法getGrade，参数为int:</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredMethod(<span class="string">"getGrade"</span>, <span class="keyword">int</span><span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getGrade</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果:</span></span><br><span class="line"><span class="comment">//public int Student.getScore(java.lang.String)</span></span><br><span class="line"><span class="comment">//public java.lang.String Person.getName()</span></span><br><span class="line"><span class="comment">//private int Student.getGrade(int)</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-Method对象包含一个方法的所有信息"><a href="#1-3-2-Method对象包含一个方法的所有信息" class="headerlink" title="1.3.2 Method对象包含一个方法的所有信息"></a>1.3.2 <code>Method</code>对象包含一个方法的所有信息</h3><table>
<thead>
<tr>
<th>getName()</th>
<th>返回方法名称，例如：<code>&quot;getScore&quot;</code></th>
</tr>
</thead>
<tbody><tr>
<td>getReturnType()</td>
<td>返回方法返回值类型，也是一个Class实例，例如：<code>String.class</code></td>
</tr>
<tr>
<td>getParameterTypes()</td>
<td>返回方法的参数类型，是一个Class数组，例如：<code>{String.class, int.class}</code></td>
</tr>
<tr>
<td>getModifiers()</td>
<td>返回方法的修饰符，它是一个<code>int</code>，不同的bit表示不同的含义</td>
</tr>
</tbody></table>
<h3 id="1-3-3-方法调用"><a href="#1-3-3-方法调用" class="headerlink" title="1.3.3 方法调用"></a>1.3.3 方法调用</h3><h4 id="1-3-3-1-调用一般方法-invoke-实例对象，方法参数"><a href="#1-3-3-1-调用一般方法-invoke-实例对象，方法参数" class="headerlink" title="1.3.3.1 调用一般方法[invoke(实例对象，方法参数)]"></a>1.3.3.1 调用一般方法[<code>invoke(实例对象，方法参数)</code>]</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//反射来调用substring方法</span></span><br><span class="line"><span class="comment">//单个参数</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// String对象:</span></span><br><span class="line">        String s = <span class="string">"Hello world"</span>;</span><br><span class="line">        <span class="comment">// 获取String substring(int)方法，参数为int:</span></span><br><span class="line">        Method m = String.class.getMethod("substring", int.class);</span><br><span class="line">        <span class="comment">// 在s对象上调用该方法并获取结果:</span></span><br><span class="line">        String r = (String) m.invoke(s, <span class="number">6</span>);</span><br><span class="line">        <span class="comment">// 打印调用结果:</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//多个参数之间用,隔开</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// String对象:</span></span><br><span class="line">        String s = <span class="string">"Hello world"</span>;</span><br><span class="line">        <span class="comment">// 获取String substring(int)方法，参数为int:</span></span><br><span class="line">        Method m = String.class.getMethod("substring", int.class, int.class);</span><br><span class="line">        <span class="comment">// 在s对象上调用该方法并获取结果:</span></span><br><span class="line">        String r = (String) m.invoke(s, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line">        <span class="comment">// 打印调用结果:</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对Method实例调用invoke就相当于调用该方法，invoke的第一个参数是对象实例，即在哪个实例上调用该方法，后面的可变参数要与方法参数一致，否则将报错</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-2-调用静态方法-invoke-null，方法参数"><a href="#1-3-3-2-调用静态方法-invoke-null，方法参数" class="headerlink" title="1.3.3.2 调用静态方法[invoke(null，方法参数)]"></a>1.3.3.2 调用静态方法[<code>invoke(null，方法参数)</code>]</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果获取到的Method表示一个静态方法，调用静态方法时，由于无需指定实例对象，所以invoke方法传入的第一个参数永远为null</span></span><br><span class="line"><span class="comment">//调用Integer.parseInt(String)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 获取Integer.parseInt(String)方法，参数为String:</span></span><br><span class="line">        Method m = Integer.class.getMethod("parseInt", String.class);</span><br><span class="line">        <span class="comment">// 调用该静态方法并获取结果:</span></span><br><span class="line">        Integer n = (Integer) m.invoke(<span class="keyword">null</span>, <span class="string">"12345"</span>);</span><br><span class="line">        <span class="comment">// 打印调用结果:</span></span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-3-3-调用非public方法-Method-setAccessible-true"><a href="#1-3-3-3-调用非public方法-Method-setAccessible-true" class="headerlink" title="1.3.3.3 调用非public方法[Method.setAccessible(true)]"></a>1.3.3.3 调用非<code>public</code>方法[<code>Method.setAccessible(true)</code>]</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//和Field类似，对于非public方法，我们虽然可以通过Class.getDeclaredMethod()获取该方法实例，但直接对其调用将得到一个IllegalAccessException。为了调用非public方法，我们通过Method.setAccessible(true)允许其调用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        Method m = p.getClass().getDeclaredMethod(<span class="string">"setName"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        m.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        m.invoke(p, <span class="string">"Bob"</span>);</span><br><span class="line">        System.out.println(p.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//此外，setAccessible(true)可能会失败。如果JVM运行期存在SecurityManager，那么它会根据规则进行检查，有可能阻止setAccessible(true)。例如，某个SecurityManager可能不允许对java和javax开头的package的类调用setAccessible(true)，这样可以保证JVM核心库的安全</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-4-多态-遵循多态原则"><a href="#1-3-4-多态-遵循多态原则" class="headerlink" title="1.3.4 多态[遵循多态原则]"></a>1.3.4 多态[遵循多态原则]</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 获取Person的hello方法:</span></span><br><span class="line">        Method h = Person.class.getMethod("hello");</span><br><span class="line">        <span class="comment">// 对Student实例调用hello方法:</span></span><br><span class="line">        h.invoke(<span class="keyword">new</span> Student());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Person:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Student:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果:</span></span><br><span class="line"><span class="comment">//Student:hello </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用反射调用方法时，仍然遵循多态原则：即总是调用实际类型的覆写方法（如果存在）</span></span><br><span class="line">Method m = Person.class.getMethod("hello");</span><br><span class="line">m.invoke(<span class="keyword">new</span> Student());</span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line">Person p = <span class="keyword">new</span> Student();</span><br><span class="line">p.hello();</span><br></pre></td></tr></table></figure>

<h2 id="1-4-调用构造方法"><a href="#1-4-调用构造方法" class="headerlink" title="1.4 调用构造方法"></a>1.4 调用构造方法</h2><h3 id="1-4-1-获取Constructor对象"><a href="#1-4-1-获取Constructor对象" class="headerlink" title="1.4.1 获取Constructor对象"></a>1.4.1 获取<code>Constructor</code>对象</h3><table>
<thead>
<tr>
<th>getConstructor(Class…)</th>
<th>获取某个<code>public</code>的<code>Constructor</code></th>
</tr>
</thead>
<tbody><tr>
<td>getDeclaredConstructor(Class…)</td>
<td>获取某个<code>Constructor</code></td>
</tr>
<tr>
<td>getConstructors()</td>
<td>获取所有<code>public</code>的<code>Constructor</code></td>
</tr>
<tr>
<td>getDeclaredConstructors()</td>
<td>获取所有<code>Constructor</code></td>
</tr>
</tbody></table>
<h3 id="1-4-2-创建实例对象newInstance"><a href="#1-4-2-创建实例对象newInstance" class="headerlink" title="1.4.2 创建实例对象newInstance()"></a>1.4.2 创建实例对象<code>newInstance()</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 获取构造方法Integer(int):</span></span><br><span class="line">        Constructor cons1 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 调用构造方法:</span></span><br><span class="line">        Integer n1 = (Integer) cons1.newInstance(<span class="number">123</span>);</span><br><span class="line">        System.out.println(n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取构造方法Integer(String)</span></span><br><span class="line">        Constructor cons2 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        Integer n2 = (Integer) cons2.newInstance(<span class="string">"456"</span>);</span><br><span class="line">        System.out.println(n2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//即便不获取Constructor对象,直接通过xxx.class.newInstance()也是可以的。但这样的局限是，它只能调用该类的public无参数构造方法。如果构造方法带有参数，或者不是public，就无法直接通过Class.newInstance()来调用。</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-3-调用非-public-的Constructor-Constructor-setAccessible-true"><a href="#1-4-3-调用非-public-的Constructor-Constructor-setAccessible-true" class="headerlink" title="1.4.3 调用非 public 的Constructor[Constructor.setAccessible(true)]"></a>1.4.3 调用非 <code>public</code> 的<code>Constructor</code>[<code>Constructor.setAccessible(true)</code>]</h3><blockquote>
<p><code>setAccessible(true)</code>设置允许访问。<code>setAccessible(true)</code>可能会失败</p>
</blockquote>
<h3 id="1-4-4-无多态问题"><a href="#1-4-4-无多态问题" class="headerlink" title="1.4.4 无多态问题"></a>1.4.4 无多态问题</h3><blockquote>
<p><code>Constructor</code>总是当前类定义的构造方法，和父类无关，因此不存在多态的问题</p>
</blockquote>
<h2 id="1-5-获取继承关系"><a href="#1-5-获取继承关系" class="headerlink" title="1.5 获取继承关系"></a>1.5 获取继承关系</h2><h3 id="1-5-1-获取父类的Class-Class-getSuperclass"><a href="#1-5-1-获取父类的Class-Class-getSuperclass" class="headerlink" title="1.5.1 获取父类的Class[Class.getSuperclass()]"></a>1.5.1 获取父类的Class[<code>Class.getSuperclass()</code>]</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Integer的父类类型是Number，Number的父类是Object，Object的父类是null。除Object外，其他任何非interface的Class都必定存在一个父类类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class i = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class n = i.getSuperclass();</span><br><span class="line">        System.out.println(n);</span><br><span class="line">        Class o = n.getSuperclass();</span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(o.getSuperclass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果:</span></span><br><span class="line">    <span class="comment">//class java.lang.Number </span></span><br><span class="line">    <span class="comment">//class java.lang.Object </span></span><br><span class="line">    <span class="comment">//null</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-2-获取interface-Class-getInterfaces"><a href="#1-5-2-获取interface-Class-getInterfaces" class="headerlink" title="1.5.2 获取interface[Class.getInterfaces()]"></a>1.5.2 获取interface[<code>Class.getInterfaces()</code>]</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//由于一个类可能实现一个或多个接口，通过Class我们就可以查询到实现的接口类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class s = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class[] is = s.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class i : is) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果:</span></span><br><span class="line">    <span class="comment">//interface java.lang.Comparable </span></span><br><span class="line">    <span class="comment">//interface java.lang.constant.Constable </span></span><br><span class="line">    <span class="comment">//interface java.lang.constant.ConstantDesc</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getInterfaces()只返回当前类直接实现的接口类型，并不包括其父类实现的接口类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class s = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getSuperclass</span>()</span>;</span><br><span class="line">        Class[] is = s.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class i : is) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果:</span></span><br><span class="line">	<span class="comment">//interface java.io.Serializable </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*Integer的父类是Number，Number实现的接口是java.io.Serializable</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*1.对所有interface的Class调用getSuperclass()返回的是null，获取接口的父接口要用getInterfaces()</span></span><br><span class="line"><span class="comment">*2.如果一个类没有实现任何interface，那么getInterfaces()返回空数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">System.out.println(java.io.DataInputStream<span class="class">.<span class="keyword">class</span>.<span class="title">getSuperclass</span>())</span>; </span><br><span class="line"><span class="comment">// java.io.FilterInputStream，因为DataInputStream继承自FilterInputStream</span></span><br><span class="line"></span><br><span class="line">System.out.println(java.io.Closeable<span class="class">.<span class="keyword">class</span>.<span class="title">getSuperclass</span>())</span>; </span><br><span class="line"><span class="comment">// null，对接口调用getSuperclass()总是返回null，获取接口的父接口要用getInterfaces()</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-3-继承关系instanceof"><a href="#1-5-3-继承关系instanceof" class="headerlink" title="1.5.3 继承关系instanceof"></a>1.5.3 继承关系<code>instanceof</code></h3><table>
<thead>
<tr>
<th><code>instanceof</code></th>
<th>一个实例是否是某个类型时，正常情况下，使用<code>instanceof</code>操作符</th>
</tr>
</thead>
<tbody><tr>
<td><code>isAssignableFrom()</code></td>
<td>如果是两个<code>Class</code>实例，要判断一个向上转型是否成立，可以调用<code>isAssignableFrom()</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//instanceof</span></span><br><span class="line">Object n = Integer.valueOf(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">boolean</span> isDouble = n <span class="keyword">instanceof</span> Double; <span class="comment">// false</span></span><br><span class="line"><span class="keyword">boolean</span> isInteger = n <span class="keyword">instanceof</span> Integer; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> isNumber = n <span class="keyword">instanceof</span> Number; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> isSerializable = n <span class="keyword">instanceof</span> java.io.Serializable; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//isAssignableFrom()</span></span><br><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// true，因为Integer可以赋值给Integer</span></span><br><span class="line"><span class="comment">// Number n = ?</span></span><br><span class="line">Number<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// true，因为Integer可以赋值给Number</span></span><br><span class="line"><span class="comment">// Object o = ?</span></span><br><span class="line">Object<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// true，因为Integer可以赋值给Object</span></span><br><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Number</span>.<span class="title">class</span>)</span>; <span class="comment">// false，因为Number不能赋值给Integer</span></span><br></pre></td></tr></table></figure>









<h1 id="2-日期与时间"><a href="#2-日期与时间" class="headerlink" title="2.日期与时间"></a>2.日期与时间</h1><h1 id="3-多线程"><a href="#3-多线程" class="headerlink" title="3.多线程"></a>3.多线程</h1><blockquote>
<p>进程和线程:一个<strong>进程</strong>可以包含一个或多个<strong>线程</strong>，但至少会有一个<strong>线程</strong>。即进程和线程是包含关系，但是多任务既可以由多进程实现，也可以由单进程内的多线程实现，还可以混合多进程＋多线程</p>
</blockquote>
<blockquote>
<p>多进程缺点：</p>
<ul>
<li>创建进程比创建线程开销大，尤其是在Windows系统上；</li>
<li>进程间通信比线程间通信要慢，因为线程间通信就是读写同一个变量，速度很快。</li>
</ul>
</blockquote>
<blockquote>
<p>多进程优点：</p>
<ul>
<li>多进程稳定性比多线程高，因为在多进程的情况下，一个进程崩溃不会影响其他进程，而在多线程的情况下，任何一个线程崩溃会直接导致整个进程崩溃。</li>
</ul>
</blockquote>
<h2 id="3-1-创建新线程"><a href="#3-1-创建新线程" class="headerlink" title="3.1 创建新线程"></a>3.1 创建新线程</h2><blockquote>
<p>1.继承Thread类</p>
<p>2.实现Runnable接口</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">        t.start(); <span class="comment">// 启动新线程</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> MyRunnable());</span><br><span class="line">        t.start(); <span class="comment">// 启动新线程</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//lambda语法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        t.start(); <span class="comment">// 启动新线程</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-1-1-run-和start"><a href="#3-1-1-run-和start" class="headerlink" title="3.1.1 run()和start()"></a>3.1.1 <code>run()</code>和<code>start()</code></h3><blockquote>
<p>调用<code>Thread</code>实例的<code>start()</code>方法才是启动新线程</p>
<ul>
<li>查看<code>Thread</code>类的源代码，会看到<code>start()</code>方法内部调用了一个<code>private native void start0()</code>方法，<code>native</code>修饰符表示这个方法是由JVM虚拟机内部的C代码实现的，不是由Java代码实现的</li>
</ul>
</blockquote>
<blockquote>
<p>调用<code>run()</code>方法，相当于调用了一个普通的Java方法，当前线程并没有任何改变，也不会启动新线程</p>
</blockquote>
<h3 id="3-1-2-线程的优先级"><a href="#3-1-2-线程的优先级" class="headerlink" title="3.1.2 线程的优先级"></a>3.1.2 线程的优先级</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设定优先级</span></span><br><span class="line"><span class="comment">//优先级高的线程被操作系统调度的优先级较高，操作系统对高优先级线程可能调度更频繁，但我们决不能通过设置优先级来确保高优先级的线程一定会先执行。</span></span><br><span class="line">Thread.setPriority(<span class="keyword">int</span> n) <span class="comment">// 1~10, 默认值5</span></span><br></pre></td></tr></table></figure>

<p>==注意：当一个新的线程启动以后，它就由操作系统调度，程序本身无法确定线程的调度顺序==</p>
<h2 id="3-2-线程状态"><a href="#3-2-线程状态" class="headerlink" title="3.2  线程状态"></a>3.2  线程状态</h2><table>
<thead>
<tr>
<th align="center">状态</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">New</td>
<td align="left">新创建的线程，尚未执行</td>
</tr>
<tr>
<td align="center">Runnable</td>
<td align="left">运行中的线程，正在执行<code>run()</code>方法的Java代码</td>
</tr>
<tr>
<td align="center">Blocked</td>
<td align="left">运行中的线程，因为某些操作被阻塞而挂起</td>
</tr>
<tr>
<td align="center">Waiting</td>
<td align="left">运行中的线程，因为某些操作在等待中</td>
</tr>
<tr>
<td align="center">Timed Waiting</td>
<td align="left">运行中的线程，因为执行<code>sleep()</code>方法正在计时等待</td>
</tr>
<tr>
<td align="center">Terminated</td>
<td align="left">线程已终止，因为<code>run()</code>方法执行完毕</td>
</tr>
</tbody></table>
<h3 id="3-2-1-线程中止原因"><a href="#3-2-1-线程中止原因" class="headerlink" title="3.2.1 线程中止原因"></a>3.2.1 线程中止原因</h3><table>
<thead>
<tr>
<th>线程正常终止</th>
<th><code>run()</code>方法执行到<code>return</code>语句返回</th>
</tr>
</thead>
<tbody><tr>
<td>线程意外终止</td>
<td><code>run()</code>方法因为未捕获的异常导致线程终止</td>
</tr>
<tr>
<td><del>对某个线程的<code>Thread</code>实例调用<code>stop()</code>方法强制终止</del></td>
<td>不推荐使用</td>
</tr>
</tbody></table>
<h3 id="3-2-2-join"><a href="#3-2-2-join" class="headerlink" title="3.2.2   join()"></a>3.2.2   <code>join()</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">"start"</span>);</span><br><span class="line">        t.start();</span><br><span class="line">        t.join();</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">start</span></span><br><span class="line"><span class="comment">end</span></span><br><span class="line"><span class="comment">/</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>使用</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>join()</td>
<td>对另一个线程对象调用<code>join()</code>方法可以等待其执行结束</td>
</tr>
<tr>
<td>线程结束调用join()</td>
<td>对已经运行结束的线程调用<code>join()</code>方法会立刻返回</td>
</tr>
<tr>
<td>join(long)</td>
<td>指定等待时间，超过等待时间线程仍然没有结束就不再等待</td>
</tr>
</tbody></table>
<h2 id="3-3-中断线程interrupt"><a href="#3-3-中断线程interrupt" class="headerlink" title="3.3 中断线程interrupt()"></a>3.3 中断线程<code>interrupt()</code></h2><h1 id="4-注解"><a href="#4-注解" class="headerlink" title="4.注解"></a>4.注解</h1><h2 id="4-1-使用注解"><a href="#4-1-使用注解" class="headerlink" title="4.1 使用注解"></a>4.1 使用注解</h2><blockquote>
<p>注解<code>Annotation</code></p>
<p>注释会被编译器直接忽略，注解则可以被编译器打包进入class文件，因此，注解是一种用作标注的“元数据”</p>
</blockquote>
<table>
<thead>
<tr>
<th>注解分类</th>
<th>举例</th>
<th>举例</th>
<th>注意</th>
</tr>
</thead>
<tbody><tr>
<td>1.由编译器使用的注解</td>
<td><code>@Override</code>让编译器检查该方法是否正确地实现了覆写</td>
<td><code>@SuppressWarnings</code>告诉编译器忽略此处代码产生的警告</td>
<td>注解不会被编译进入<code>.class</code>文件，它们在编译后就被编译器扔掉了</td>
</tr>
<tr>
<td>2.由工具处理<code>.class</code>文件使用的注解</td>
<td>有些工具会在加载class的时候，对class做动态修改，实现一些特殊的功能</td>
<td></td>
<td>这类注解会被编译进入<code>.class</code>文件，但加载结束后并不会存在于内存中。这类注解只被一些底层库使用，一般我们不必自己处理</td>
</tr>
<tr>
<td>3.程序运行期能够读取的注解，它们在加载后一直存在于JVM中，这也是最常用的注解</td>
<td>一个配置了<code>@PostConstruct</code>的方法会在调用构造方法后自动被调用</td>
<td></td>
<td>这是Java代码读取该注解实现的功能，JVM并不会识别该注解</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>定义注解中的配置参数，包括：</th>
</tr>
</thead>
<tbody><tr>
<td>1.所有基本类型</td>
</tr>
<tr>
<td>2.String</td>
</tr>
<tr>
<td>3.枚举类型</td>
</tr>
<tr>
<td>4.基本类型、String以及枚举的数组</td>
</tr>
</tbody></table>
<blockquote>
<p><code>Tips</code>1.因为配置参数必须是常量，所以，上述限制保证了注解在定义时就已经确定了每个参数的值</p>
<p>2.注解的配置参数可以有默认值，缺少某个配置参数时将使用默认值</p>
<p>3.大部分注解会有一个名为<code>value</code>的配置参数，对此参数赋值，可以只写常量，相当于省略了value参数。</p>
<p>如果只写注解，相当于全部使用默认值</p>
<p>4.如果参数名称是<code>value</code>，且只有一个参数，那么可以省略参数名称</p>
</blockquote>
<h2 id="4-2-定义注解"><a href="#4-2-定义注解" class="headerlink" title="4.2 定义注解"></a>4.2 定义注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注解的参数类似无参数方法，可以用default设定一个默认值（强烈推荐）。最常用的参数应当命名为value</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-1-元注解"><a href="#4-2-1-元注解" class="headerlink" title="4.2.1 元注解"></a>4.2.1 元注解</h3><blockquote>
<p>有一些注解可以修饰其他注解，这些注解就称为元注解</p>
</blockquote>
<table>
<thead>
<tr>
<th>元注解</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>@Target</code>^常用^：定义<code>Annotation</code>能够被应用于源码的哪些位置</td>
<td>类或接口：<code>ElementType.TYPE</code></td>
<td>字段：<code>ElementType.FIELD</code></td>
<td>方法：<code>ElementType.METHOD</code></td>
<td>构造方法：<code>ElementType.CONSTRUCTOR</code></td>
<td>方法参数：<code>ElementType.PARAMETER</code></td>
</tr>
<tr>
<td><code>@Retention</code>^常用^：定义了<code>Annotation</code>的生命周期</td>
<td>仅编译期：<code>RetentionPolicy.SOURCE</code></td>
<td>仅class文件：<code>RetentionPolicy.CLASS</code></td>
<td>运行期：<code>RetentionPolicy.RUNTIME</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>@Repeatable</code>：定义<code>Annotation</code>是否可重复</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>@Inherited</code>：使用<code>@Inherited</code>定义子类是否可继承父类定义的<code>Annotation</code>。<code>@Inherited</code>仅针对<code>@Target(ElementType.TYPE)</code>类型的<code>annotation</code>有效，并且仅针对<code>class</code>的继承，对<code>interface</code>的继承无效</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义注解@Report可用在方法上，我们必须添加一个@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义注解@Report可用在方法或字段上，可以把@Target注解参数变为数组&#123; ElementType.METHOD, ElementType.FIELD &#125;</span></span><br><span class="line"><span class="meta">@Target</span>(&#123;</span><br><span class="line">    ElementType.METHOD,</span><br><span class="line">    ElementType.FIELD</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//@Target定义的value是ElementType[]数组，只有一个元素时，可以省略数组的写法</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果@Retention不存在，则该Annotation默认为CLASS。因为通常我们自定义的Annotation都是RUNTIME，所以，务必要加上@Retention(RetentionPolicy.RUNTIME)这个元注解</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Repeatable应用不是特别广泛</span></span><br><span class="line"><span class="meta">@Repeatable</span>(Reports<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Target</span>(<span class="title">ElementType</span>.<span class="title">TYPE</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">Report</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Reports &#123;</span><br><span class="line">    Report[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//经过@Repeatable修饰后，在某个类型声明处，就可以添加多个@Report注解</span></span><br><span class="line"><span class="meta">@Report</span>(type=<span class="number">1</span>, level=<span class="string">"debug"</span>)</span><br><span class="line"><span class="meta">@Report</span>(type=<span class="number">2</span>, level=<span class="string">"warning"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果一个类用到了@Report</span></span><br><span class="line"><span class="meta">@Report</span>(type=<span class="number">1</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//它的子类默认也定义了该注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-2-定义Annotation"><a href="#4-2-2-定义Annotation" class="headerlink" title="4.2.2 定义Annotation"></a>4.2.2 定义<code>Annotation</code></h3><table>
<thead>
<tr>
<th>定义<code>Annotation</code>的步骤</th>
<th>代码举例</th>
</tr>
</thead>
<tbody><tr>
<td>1.用<code>@interface</code>定义注解</td>
<td>public @interface Report { }</td>
</tr>
<tr>
<td>2.添加参数、默认值</td>
<td>public @interface Report {     int type() default 0;     String level() default “info”;     String value() default “”; }</td>
</tr>
<tr>
<td>3.用元注解配置注解</td>
<td>@Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) public @interface Report {     int type() default 0;     String level() default “info”;     String value() default “”; }</td>
</tr>
</tbody></table>
<blockquote>
<p><code>Tips</code>：1.把最常用的参数定义为<code>value()</code>，推荐所有参数都尽量设置默认值</p>
<p>2.其中，必须设置<code>@Target</code>和<code>@Retention</code>，<code>@Retention</code>一般设置为<code>RUNTIME</code>，因为我们自定义的注解通常要求在运行期读取。一般情况下，不必写<code>@Inherited</code>和<code>@Repeatable</code></p>
</blockquote>
<h2 id="4-3-处理注解"><a href="#4-3-处理注解" class="headerlink" title="4.3 处理注解"></a>4.3 处理注解</h2><h1 id="5-泛型"><a href="#5-泛型" class="headerlink" title="5.泛型"></a>5.泛型</h1><h1 id="6-集合"><a href="#6-集合" class="headerlink" title="6.集合"></a>6.集合</h1><h1 id="14-计算机网络"><a href="#14-计算机网络" class="headerlink" title="14.计算机网络"></a>14.计算机网络</h1><h2 id="14-1-基础"><a href="#14-1-基础" class="headerlink" title="14.1 基础"></a>14.1 基础</h2><h3 id="14-1-1-IP"><a href="#14-1-1-IP" class="headerlink" title="14.1.1 IP"></a>14.1.1 IP</h3><blockquote>
<p>如果一台计算机只有一个网卡，并且接入了网络，那么，它有一个本机地址<code>127.0.0.1</code>，还有一个IP地址，例如<code>101.202.99.12</code>，可以通过这个IP地址接入网络。</p>
<p>如果一台计算机有两块网卡，那么除了本机地址，它可以有两个IP地址，可以分别接入两个网络。通常连接两个网络的设备是路由器或者交换机，它至少有两个IP地址，分别接入不同的网络，让网络之间连接起来。</p>
<p>如果两台计算机位于同一个网络，那么他们之间可以直接通信，因为他们的IP地址前段是相同的，也就是网络号是相同的。网络号是IP地址通过子网掩码过滤后得到的</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IP &#x3D; 101.202.99.2</span><br><span class="line">Mask &#x3D; 255.255.255.0</span><br><span class="line">Network &#x3D; IP &amp; Mask &#x3D; 101.202.99.0</span><br></pre></td></tr></table></figure>

<h3 id="14-1-2-网络模型"><a href="#14-1-2-网络模型" class="headerlink" title="14.1.2 网络模型"></a>14.1.2 网络模型</h3><table>
<thead>
<tr>
<th>OSI</th>
<th>TCP/IP</th>
</tr>
</thead>
<tbody><tr>
<td>应用层：提供应用程序之间的通信</td>
<td>应用层</td>
</tr>
<tr>
<td>表示层：处理数据格式，加解密等等</td>
<td>应用层</td>
</tr>
<tr>
<td>会话层：负责建立和维护会话</td>
<td>应用层</td>
</tr>
<tr>
<td>传输层：负责提供端到端的可靠传输</td>
<td>传输层</td>
</tr>
<tr>
<td>网络层：负责根据目标地址选择路由来传输数据</td>
<td>IP层</td>
</tr>
<tr>
<td>链路层：负责把数据进行分片并且真正通过物理网络传输，例如，无线网、光纤等</td>
<td>网络接口层</td>
</tr>
<tr>
<td>物理层：同链路层</td>
<td>网络接口层</td>
</tr>
</tbody></table>
<h3 id="14-1-3-IP-amp-TCP-amp-UDP"><a href="#14-1-3-IP-amp-TCP-amp-UDP" class="headerlink" title="14.1.3 IP&amp;TCP&amp;UDP"></a>14.1.3 IP&amp;TCP&amp;UDP</h3><table>
<thead>
<tr>
<th>常用协议</th>
</tr>
</thead>
<tbody><tr>
<td><code>IP协议</code>是一个分组交换，它不保证可靠传输，IP协议只负责发数据包，不保证顺序和正确性</td>
</tr>
<tr>
<td><code>TCP协议</code>是传输控制协议，它是面向连接的协议，支持可靠传输和双向通信。TCP协议是建立在IP协议之上的。TCP协议负责控制数据包传输，它在传输数据之前需要先建立连接，建立连接后才能传输数据，传输完后还需要断开连接。TCP协议之所以能保证数据的可靠传输，是通过接收确认、超时重传这些机制实现的。并且，TCP协议允许双向通信，即通信双方可以同时发送和接收数据；TCP协议也是应用最广泛的协议，许多高级协议都是建立在TCP协议之上的，例如HTTP、SMTP等</td>
</tr>
<tr>
<td><code>UDP协议</code>（User Datagram Protocol）是一种数据报文协议，它是无连接协议，不保证可靠传输。因为UDP协议在通信前不需要建立连接，因此它的传输效率比TCP高，而且UDP协议比TCP协议要简单得多</td>
</tr>
</tbody></table>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Java" >
    <span class="tag-code">Java</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2020/05/java8/">
        <span class="nav-arrow">← </span>
        
          Netty
        
      </a>
    
    
      <a class="nav-right" href="/2020/10/2020-10-08-Hexo%E7%9A%84%E6%90%9C%E7%B4%A2%E5%AE%9E%E7%8E%B0%E4%B9%8B-hexo-generator-search/">
        
          Hexo的搜索实现之 hexo-generator-search
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#1-反射"><span class="toc-nav-text">1.反射</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-类封装与反射"><span class="toc-nav-text">1.*类封装与反射</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-1-Class"><span class="toc-nav-text">1.1 Class</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-1-如何获取一个class的Class实例？"><span class="toc-nav-text">1.1.1 如何获取一个class的Class实例？</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-2-Class实例比较和instanceof的区别"><span class="toc-nav-text">1.1.2 Class实例比较和instanceof的区别</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-3-创建实例-newInstance"><span class="toc-nav-text">1.1.3 创建实例 newInstance()</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-4-动态加载"><span class="toc-nav-text">1.1.4 动态加载</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-2-访问字段"><span class="toc-nav-text">1.2 访问字段</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-2-1-通过Class实例获取字段信息"><span class="toc-nav-text">1.2.1 通过Class实例获取字段信息</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-2-2-Field对象包含了一个字段的所有信息"><span class="toc-nav-text">1.2.2  Field对象包含了一个字段的所有信息</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-2-3-获取字段值-Field-get-Object"><span class="toc-nav-text">1.2.3 获取字段值 Field.get(Object)</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-2-4-设置字段值Field-set-Object-Object"><span class="toc-nav-text">1.2.4 设置字段值Field.set(Object, Object)</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-3-调用方法"><span class="toc-nav-text">1.3 调用方法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-1-获取Method信息"><span class="toc-nav-text">1.3.1 获取Method信息</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-2-Method对象包含一个方法的所有信息"><span class="toc-nav-text">1.3.2 Method对象包含一个方法的所有信息</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-3-方法调用"><span class="toc-nav-text">1.3.3 方法调用</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-3-1-调用一般方法-invoke-实例对象，方法参数"><span class="toc-nav-text">1.3.3.1 调用一般方法[invoke(实例对象，方法参数)]</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-3-2-调用静态方法-invoke-null，方法参数"><span class="toc-nav-text">1.3.3.2 调用静态方法[invoke(null，方法参数)]</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-3-3-3-调用非public方法-Method-setAccessible-true"><span class="toc-nav-text">1.3.3.3 调用非public方法[Method.setAccessible(true)]</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-4-多态-遵循多态原则"><span class="toc-nav-text">1.3.4 多态[遵循多态原则]</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-4-调用构造方法"><span class="toc-nav-text">1.4 调用构造方法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-1-获取Constructor对象"><span class="toc-nav-text">1.4.1 获取Constructor对象</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-2-创建实例对象newInstance"><span class="toc-nav-text">1.4.2 创建实例对象newInstance()</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-3-调用非-public-的Constructor-Constructor-setAccessible-true"><span class="toc-nav-text">1.4.3 调用非 public 的Constructor[Constructor.setAccessible(true)]</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-4-无多态问题"><span class="toc-nav-text">1.4.4 无多态问题</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-5-获取继承关系"><span class="toc-nav-text">1.5 获取继承关系</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-1-获取父类的Class-Class-getSuperclass"><span class="toc-nav-text">1.5.1 获取父类的Class[Class.getSuperclass()]</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-2-获取interface-Class-getInterfaces"><span class="toc-nav-text">1.5.2 获取interface[Class.getInterfaces()]</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-5-3-继承关系instanceof"><span class="toc-nav-text">1.5.3 继承关系instanceof</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#2-日期与时间"><span class="toc-nav-text">2.日期与时间</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#3-多线程"><span class="toc-nav-text">3.多线程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-1-创建新线程"><span class="toc-nav-text">3.1 创建新线程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-1-1-run-和start"><span class="toc-nav-text">3.1.1 run()和start()</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-1-2-线程的优先级"><span class="toc-nav-text">3.1.2 线程的优先级</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-2-线程状态"><span class="toc-nav-text">3.2  线程状态</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-2-1-线程中止原因"><span class="toc-nav-text">3.2.1 线程中止原因</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-2-2-join"><span class="toc-nav-text">3.2.2   join()</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-3-中断线程interrupt"><span class="toc-nav-text">3.3 中断线程interrupt()</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#4-注解"><span class="toc-nav-text">4.注解</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-1-使用注解"><span class="toc-nav-text">4.1 使用注解</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-2-定义注解"><span class="toc-nav-text">4.2 定义注解</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-2-1-元注解"><span class="toc-nav-text">4.2.1 元注解</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-2-2-定义Annotation"><span class="toc-nav-text">4.2.2 定义Annotation</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-3-处理注解"><span class="toc-nav-text">4.3 处理注解</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#5-泛型"><span class="toc-nav-text">5.泛型</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#6-集合"><span class="toc-nav-text">6.集合</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#14-计算机网络"><span class="toc-nav-text">14.计算机网络</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#14-1-基础"><span class="toc-nav-text">14.1 基础</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-1-1-IP"><span class="toc-nav-text">14.1.1 IP</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-1-2-网络模型"><span class="toc-nav-text">14.1.2 网络模型</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-1-3-IP-amp-TCP-amp-UDP"><span class="toc-nav-text">14.1.3 IP&amp;TCP&amp;UDP</span></a></li></ol></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://coolhermit.github.io/2020/06/java-manual/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>



  <script>
    var gitmentConfig = "CoolHermit";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "Java手册",
        owner: "CoolHermit",
        repo: "CoolHermit.github.io",
        oauth: {
          client_id: "e1260bf91cdd2a153b98",
          client_secret: "090d1303d5cadbc2acfe371c7aca988fd7900764"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  </script>




    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2020 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng" target="_blank" rel="noopener">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>